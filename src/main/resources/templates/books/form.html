<div th:fragment="content" xmlns:th="http://www.thymeleaf.org">
  <div class="app-card p-4 p-md-5 reveal">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h3 class="mb-1" th:text="${book.id == null ? 'Thêm sách mới' : 'Cập nhật sách'}"></h3>
        <div class="app-muted">Hoàn thiện thông tin trước khi lưu.</div>
      </div>
      <span class="badge-soft" th:text="${book.id == null ? 'Tạo mới' : 'Chỉnh sửa'}"></span>
    </div>

    <form class="row g-3"
          th:object="${book}"
          th:action="${book.id == null} ? @{/books} : @{/books/{id}(id=${book.id})}"
          method="post">

      <div class="col-md-6">
        <label class="form-label">Tiêu đề</label>
        <input class="form-control" th:field="*{title}">
        <div class="text-danger small" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Tác giả</label>
        <input class="form-control" th:field="*{author}">
        <div class="text-danger small" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Giá</label>
        <input type="number" step="0.01" class="form-control" th:field="*{price}">
        <div class="text-danger small" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Danh mục</label>
        <select class="form-select" th:field="*{category}">
          <option value="" disabled th:selected="${book.category == null}">-- Chọn danh mục --</option>
          <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.name}"></option>
        </select>
        <div class="text-danger small" th:if="${#fields.hasErrors('category')}" th:errors="*{category}"></div>
      </div>

      <div class="col-12 d-flex gap-2">
        <button class="btn btn-primary" type="submit">Lưu</button>
        <a class="btn btn-outline-secondary" th:href="@{/books}">Quay lại</a>
      </div>
    </form>
  </div>
</div>
